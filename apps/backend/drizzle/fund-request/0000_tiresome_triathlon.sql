CREATE TABLE `fund_transactions` (
	`id` varchar(36) NOT NULL,
	`tenant_id` varchar(36) NOT NULL,
	`user_id` varchar(36) NOT NULL,
	`idempotency_key` varchar(64) NOT NULL,
	`amount` int NOT NULL,
	`wallet_id` varchar(36) NOT NULL,
	`platform_service_id` varchar(36) NOT NULL,
	`platform_service_feature_id` varchar(36),
	`provider_code` varchar(40) NOT NULL,
	`provider_id` varchar(36) NOT NULL,
	`provider_config` json NOT NULL,
	`status` varchar(20) NOT NULL,
	`provider_response` json,
	`provider_txn_id` varchar(100),
	`reference_id` varchar(100),
	`payment_mode` varchar(30) NOT NULL,
	`failure_reason` varchar(255),
	`retry_count` int DEFAULT 0,
	`last_retry_at` timestamp,
	`processed_by` varchar(36),
	`processed_at` timestamp,
	`created_at` timestamp,
	`updated_at` timestamp,
	CONSTRAINT `fund_transactions_id` PRIMARY KEY(`id`),
	CONSTRAINT `uniq_recharge_idempotency` UNIQUE(`tenant_id`,`idempotency_key`)
);
